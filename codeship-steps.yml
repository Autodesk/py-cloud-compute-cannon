- type: parallel
  services:
   - test3_6
   - test2_7
  steps:
    - command: py.test -n 4
      name: runtests


- name: deploy
  service: test3_6
  type: serial
  steps:
     - command: ./scripts/check_pyversion.sh
       name: check_pyversion
     - command: ./scripts/deploy.sh
       name: pypi_deploy
  # tests for semantic versions
  tag: '^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(-(0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(\.(0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*)?(\+[0-9a-zA-Z-]+(\.[0-9a-zA-Z-]+)*)?$'


